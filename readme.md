## 部落冲突夜世界自动化突袭和刷钱辅助

### 使用步骤(推荐)
1. 安装好雷电模拟器 [雷电模拟器官网](https://www.ldmnq.com/)
2. **模拟器分辨率设置宽800，高600，dpi160**（重要）
3. 在模拟器中安装部落冲突并登录你的账号，确保进入**夜世界**。
4. 部落冲突中设置配兵推荐全亡灵，或者全弓箭手。主要是还没写其它兵种判断（偷懒）
5. [下载](https://github.com/qilishidai/ClashOfClansResourceRaid/releases/tag/v2.0.2)脚本,解压后双击"部落冲突夜世界辅助.exe"运行
6. 点击菜单栏中的“更多”选项，然后选择“设置”，进行所需的设置。![设置界面](img/设置界面.png)
7. 点击菜单栏中的“启动”选项开始挂机
#### 注意:
1.使用过程中模拟器不可以最小化,但是可以被其它窗口遮挡.如果不小心最小化了,脚本一段时间后也会自动矫正,无需担心不小心最小化了模拟器导致出现问题

2.建议点击菜单栏中的“更多”选项，然后选择“禁止操作模拟器”,以免影响脚本运行.
![运行界面](img/运行界面.png)


如果你有任何问题,可以联系作者qq2105758776

---

## 拓展用法
### 从源码使用(适合掌握python,懂得调试源码的老手)

1. 安装好雷电模拟器 [雷电模拟器官网](https://www.ldmnq.com/)
2. **模拟器分辨率设置宽800，高600，dpi160**（重要）
3. 在模拟器中安装部落冲突并登录你的账号，确保进入**夜世界**。
4. 部落冲突中设置配兵推荐全亡灵，或者全弓箭手。主要是还没写其它兵种判断（偷懒）

5. 安装 Python，并执行以下命令安装依赖：
    ```
    pip install pywin32
    pip install psutil
    ```
6. 在cmd窗口中执行
   ```shell
   python main.py   
   ```
6. 点击菜单栏中的“更多”选项，然后选择“设置”，进行所需的设置。
7. 点击菜单栏中的“启动”选项开始挂机

### 设置选项的说明
- `雷电模拟器索引`：用于指定在雷电多开器中选择的模拟器，多开器页面的第一个模拟器索引为0，第二个为1。
- `部落冲突包名`：指定部落冲突的包名，可以是国服或国际服。
- `一直执行`：设置为 True 则脚本会持续执行，设置为 False 则根据 `需要执行多少秒` 变量确定运行时间。
- `需要执行多少秒`：如果 `一直执行` 设置为 False，脚本将在设定的秒数后停止运行。
- `是否开启刷墙`：设置为 True 则开启刷墙功能，否则关闭。
- `循环最大等待秒数`：设定每个循环的最大等待秒数。
- `至少多少金币开始刷墙`：设置刷墙功能的金币阈值。
- `至少多少圣水开始刷墙`：设置刷墙功能的圣水阈值。

### 编译为exe
```shell
pyinstaller --noconsole --exclude-module=cv2 main.py
```
然后将源码的资源文件复制到dist\main里面该目录下的mainexe即为可执行文件
### 第三方库
1.[OP(operator & open)](https://github.com/WallBreaker2/op)

### 更新记录
2024年7月26日
1. 修复刷墙时脚本滑动和点击实现问题

2024年7月25日
1. 后台模式截图的opengl模式，可支持隐藏模拟器运行（在菜单栏选择更多-隐藏模拟器）
2. 重写键盘和鼠标操作类，修复模式opengl后台操作失的问题

### 已知待修复问题
1. --无法最小化模拟器运行,只可以通过操作界面隐藏模拟器--
2. ~ 出发开始战斗后,有时候由于模拟器卡顿还在基地,需要图色判断.但是不影响使用,日后修复 ~.

